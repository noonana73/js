<canvas id = "ctx" width = "700" height="500" style="border:1px solid #000000;"></canvas>
<script>
(function(){
	var canv = document.getElementById("ctx");
	var ctx = canv.getContext("2d");
	var balls = [];
	var nbr_circles = 15;
	var attente = 0;
	
	for(var i = 0; i < nbr_circles; i ++){
	balls.push ({
	     posX: Math.random() * canv.width-20,
	     posY: Math.random() * canv.height-20,
	     VX: Math.random() * canv.width/400,
	     VY: 0,
	     radius: 20
	});
	}
	var gravity = 0.2;
	var frotement = 0.995;
	setInterval(dessinball, 25);
	canv.addEventListener('mousedown', 
	function(pos){//si on presse la souris
		if(Math.abs(pos.pageX - ball.posX - ball.radius/2) < ball.radius && Math.abs(pos.pageY - ball.posY - ball.radius/2) < ball.radius){
			console.log("cc");
		}
	});
	//dessine la balle
	function dessinball(){
	        ctx.clearRect(0,0,canv.width,canv.height);
	        		ctx.beginPath();
		for(var i = 0; i < nbr_circles; i ++){
		mouvementball(i);
		ctx.arc(balls[i].posX,balls[i].posY,balls[i].radius,0,2*Math.PI);
		ctx.fill();
	        ctx.closePath();
		}
	}
	//change la position de la balle
	function mouvementball(i){
		collision_balle();
	      balls[i].VY += gravity;
	      balls[i].VX *= frotement;
	      balls[i].VY *= frotement;
	      balls[i].posX += balls[i].VX;
	      balls[i].posY += balls[i].VY;
	      if(balls[i].posY + balls[i].radius > canv.height){
	      	balls[i].VY = -balls[i].VY-gravity;
	      }if(balls[i].posX + balls[i].radius > canv.width){
	      	balls[i].VX = -balls[i].VX;
	      }
	function collision_balle(){
		for(var i = 0; i < nbr_circles; i ++){
			for(var v = v+1; v < nbr_circles-1; v ++){
				if(Math.abs(balls[i].posX - balls[v].posX) < balls[i].radius + balls[v].radius && Math.abs(balls[i].posY - balls[v].posY) < balls[i].radius + balls[v].radius){
				attente = balls[i].VX;
				balls[i].VX = -balls[v].VX;
				balls[v].VX = -attente;
				}		
			}
		}
	}

})()
</script>
